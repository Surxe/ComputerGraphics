<HTML>
	<HEAD>
		<TITLE>Test to see if I can do rotation matrices with point.</TITLE>
	</HEAD>
	<BODY>
		<script src="js/transform.js"></script>
		<script src="js/init_web_gl.js"></script>
        <script src="js/shape.js"></script>
        <script src="js/main.js"></script>

        <section id="console">
            <p>Section Title</p>
        </section>
        <script id="2DVertexShader" type="notjs">
            attribute vec4 a_position;
            attribute vec3 a_color;
            varying vec3 v_color;
            void main() {
                v_color = a_color;
                gl_Position = a_position;
            }
        </script>
        <script id="2DFragmentShader" type="notjs">
            precision mediump float;
            varying vec3 v_color;
            void main() {
                gl_FragColor = vec4(v_color, 1.0);
            }
        </script>
        <script>
            my_main = new main();

            // Initial shapes' states
            var positions = [
                [-0.5, 0.0, 0.0],
                [0, 0.5, 0.0],
                [0.5, 0.0, 1.0]
            ]
            var translations = [0, .5, 0]
            var scalars = [.5, .5, .5]
            var rotations = [60, 30, 15]
            var should_fill = false;
            my_main.create_shape('triangle', positions, translations, scalars, rotations, should_fill);

            // translations = [-.5, -.5, 0]
            // my_main.create_shape('triangle', positions, translations, scalars, rotations, should_fill);

            // translations = [.5, -.5, 0]
            // my_main.create_shape('triangle', positions, translations, scalars, rotations, should_fill);

            my_main.render()

            function rotate_objects() {
                for (var i = 0; i < my_main.shapes.length; i++) {
                    var shape = my_main.shapes[i];

                    // nth shape will have nth dimension rotated by 5 degrees
                    // i.e. 3rd shape will have 3rd dimension rotated, 1st shape will have 1st dimension rotated
                    shape.rotations[i] += 5;
                        
                    shape.process_transformations();
                }
                my_main.render();
            }

            let interval_id = setInterval(rotate_objects, 1000); //rotate all objects every 1000ms

            // When space is pressed, stop the interval
            document.addEventListener('keydown', function(event) {
                if (event.code === 'Space') {
                    clearInterval(interval_id);
                }
            });
        </script>
	</BODY>
</HTML>