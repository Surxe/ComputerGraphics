<!DOCTYPE html>
<html>
<head>
    <title>WebGL First-Person Camera</title>
    <style> canvas { width: 100%; height: 100%; display: block; } </style>
</head>
<body>
    <canvas id="glCanvas"></canvas>
    <script>
        const canvas = document.getElementById("glCanvas");
        const gl = canvas.getContext("webgl");
        if (!gl) { alert("WebGL not supported"); }
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
        
        const vsSource = `
            attribute vec2 position;
            uniform float angle;
            uniform vec2 cameraPos;
            void main() {
                float s = sin(angle), c = cos(angle);
                vec2 rotatedPos = vec2(position.x * c - position.y * s, position.x * s + position.y * c);
                gl_Position = vec4(rotatedPos + cameraPos, 0, 1);
            }
        `;
        
        const fsSource = `
            void main() {
                gl_FragColor = vec4(1, 0, 0, 1);
            }
        `;
        
        function compileShader(type, source) {
            const shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                console.error(gl.getShaderInfoLog(shader));
                gl.deleteShader(shader);
                return null;
            }
            return shader;
        }
        
        const vs = compileShader(gl.VERTEX_SHADER, vsSource);
        const fs = compileShader(gl.FRAGMENT_SHADER, fsSource);
        
        const program = gl.createProgram();
        gl.attachShader(program, vs);
        gl.attachShader(program, fs);
        gl.linkProgram(program);
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
            console.error(gl.getProgramInfoLog(program));
        }
        gl.useProgram(program);
        
        const vertices = new Float32Array([0, 0.5, -0.5, -0.5, 0.5, -0.5]);
        const buffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        
        const posAttrib = gl.getAttribLocation(program, "position");
        gl.enableVertexAttribArray(posAttrib);
        gl.vertexAttribPointer(posAttrib, 2, gl.FLOAT, false, 0, 0);
        
        const angleLoc = gl.getUniformLocation(program, "angle");
        const cameraPosLoc = gl.getUniformLocation(program, "cameraPos");
        
        let angle = 0;
        let cameraX = 0, cameraY = 0;
        
        window.addEventListener("keydown", (event) => {
            const speed = 0.05;
            if (event.key === "a") angle -= 0.1;
            if (event.key === "d") angle += 0.1;
            if (event.key === "w") cameraY += speed;
            if (event.key === "s") cameraY -= speed;
            if (event.key === "z") cameraX -= speed;
            if (event.key === "x") cameraX += speed;
        });
        
        function render() {
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.uniform1f(angleLoc, angle);
            gl.uniform2f(cameraPosLoc, cameraX, cameraY);
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            requestAnimationFrame(render);
        }
        render();
    </script>
</body>
</html>
