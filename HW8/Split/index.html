<HTML>
	<HEAD>
		<TITLE>Test to see if I can do rotation matrices with point.</TITLE>
	</HEAD>
	<BODY>
		<script src="js/transform.js"></script>
		<script src="js/init_web_gl.js"></script>
        <script src="js/game_engine.js"></script>
        <script src="js/game_object.js"></script>

        <section id="console">
            <p>Section Title</p>
        </section>
        <script id="2DVertexShader" type="notjs">
            attribute vec4 a_position;
            attribute vec3 a_color;
            varying vec3 v_color;
            void main() {
                v_color = a_color;
                gl_Position = a_position;
            }
        </script>
        <script id="2DFragmentShader" type="notjs">
            precision mediump float;
            varying vec3 v_color;
            void main() {
                gl_FragColor = vec4(v_color, 1.0);
            }
        </script>
        <script>
            game_engine = new GameEngine();

            // Initial game_objects' states
            // shape is square with triangle ontop
            //    **
            //   ****
            //  ******
            // ********
            // ********
            // ********
            // ********
            var positions = [
                // square base
                [-.5, -.5, 0], //bottom left
                [.5, -.5, 0], //bottom right
                [.5, .5, 0], //top right
                [-.5, .5, 0], //top left
                // triangle ontop
                [-.5, .5, 0],
                [.5, .5, 0],
                [0, 1, 0],
            ]
            var rgb = [
                // blue square base
                [0, 0, 1],
                [0, 0, 1],
                [0, 0, 1],
                [0, 0, 1],
                // red triangle ontop
                [1, 0, 0],
                [1, 0, 0],
                [1, 0, 0],
            ]
            var rotations = [0, 0, 0]
            var scalars = [.15, .15, .15]
            var translations = [0, 0, 0]
            var should_fill = true;
            var velocity = [0, 0, 0];
            var indices = [
                // square base
                0, 1, 2, 
                0, 2, 3,
                // triangle ontop
                4, 5, 6,
            ]
            var outline_gl_draw_mode = 'LINE_LOOP';
            var fill_gl_draw_mode = 'TRIANGLES';
            var game_object = new GameObject(positions, rgb, rotations, scalars, translations, should_fill, velocity, indices, outline_gl_draw_mode, fill_gl_draw_mode);
            game_engine.add_game_object(game_object);

            game_engine.render();

            function tick() {
                // Rotate first 3 game_objects
                for (var i = 0; i < Math.min(3, game_engine.game_objects.length); i++) {
                    var game_object = game_engine.game_objects[i];

                    // nth game_object will have nth dimension rotated by 5 degrees
                    // i.e. 3rd game_object will have 3rd dimension rotated, 1st game_object will have 1st dimension rotated
                    game_object.rotations[2] += 1;
                }

                game_engine.render();
            }

            let interval_id = setInterval(tick, 1000/30);

        </script>
	</BODY>
</HTML>